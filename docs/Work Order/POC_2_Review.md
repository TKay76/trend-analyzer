# PoC Review: TikTok Creative Center Music Trend Data Scraping (`tiktok_music_scraper.py`)

## 1. 기능 요약

`tiktok_music_scraper.py` 스크립트는 TikTok Creative Center의 'Popular Music' 페이지에서 'Popular' 및 'Breakout' 탭의 음악 랭킹 데이터를 성공적으로 스크래핑하여 구조화된 JSON 형태로 콘솔에 출력하는 기능을 구현했습니다.

주요 기능은 다음과 같습니다:
- **초기 탐색:** `https://ads.tiktok.com/business/creativecenter/inspiration/popular/music/pc/en` URL로 직접 이동합니다.
- **탭 전환:** 사용자 경험을 반영하여 'Breakout' 탭을 먼저 클릭한 후 데이터를 스크래핑하고, 이어서 'Popular' 탭으로 전환하여 데이터를 스크래핑합니다.
- **데이터 추출:** 각 음악 항목에서 랭크, 트랙 제목, 아티스트 이름, 그리고 'Approved for business use' 태그의 존재 여부를 추출합니다.
- **페이지네이션 처리:** 'View More' 버튼을 클릭하는 로직을 통해 모든 가시적인 목록(Top 100)을 가져옵니다.
- **출력 형식:** 수집된 모든 데이터를 작업 지시서에 명시된 JSON 형식으로 출력합니다.

이 PoC는 TikTok Creative Center에서 음악 트렌드 데이터를 안정적으로 수집할 수 있음을 검증했으며, 특히 `headless` 모드에서의 안티봇 조치에 대한 중요한 통찰을 얻었습니다.

## 2. 향후 과제 및 발전 방향

### 2.1. `headless` 모드에서의 안정성 확보
- **안티봇 우회 기술 적용:** 현재 스크립트는 `headless=False` (브라우저를 띄운 상태)에서만 안정적으로 작동합니다. 프로덕션 환경에서는 `headless` 모드 실행이 필수적이므로, `playwright-extra`의 `stealth` 플러그인 적용, 사용자 에이전트 및 헤더 로테이션, 프록시 사용, 또는 기타 브라우저 지문 인식 우회 기술 도입을 심도 있게 검토하고 적용해야 합니다. 이는 가장 중요한 당면 과제입니다.
- **동적 로딩 및 타이밍 개선:** `headless` 모드에서 페이지 로딩 및 요소 가시성 문제가 발생할 수 있으므로, `page.wait_for_selector`, `page.wait_for_load_state`, `page.wait_for_timeout` 등의 대기 전략을 더욱 정교하게 조정하고, 필요시 `page.evaluate`를 통한 JavaScript 실행으로 로딩 상태를 직접 확인하는 로직을 추가할 수 있습니다.

### 2.2. 데이터 추출 및 파싱 개선
- **셀렉터 견고성:** 웹사이트 UI 변경에 대비하여 CSS 셀렉터의 견고성을 지속적으로 모니터링하고 업데이트해야 합니다. XPath, 텍스트 기반 셀렉터, 또는 `data-testid`와 같은 안정적인 속성 사용을 우선적으로 고려해야 합니다.
- **데이터 필드 확장:** '총 동영상 수', '트렌드 지표(성장률, 방향)', '장르/카테고리', '음악 ID' 등 음악 트렌드 분석 서비스에 필요한 추가적인 데이터 필드를 스크래핑하도록 확장할 수 있습니다.

### 2.3. 성능 및 확장성
- **병렬/분산 스크래핑:** 대량의 데이터를 효율적으로 수집하기 위해 여러 브라우저 인스턴스를 병렬로 실행하거나, 분산 스크래핑 아키텍처(예: Celery, Scrapy)를 도입하여 처리량을 늘릴 수 있습니다.
- **오류 로깅 및 모니터링:** 스크래핑 과정에서 발생하는 오류(네트워크 문제, 셀렉터 오류, 안티봇 차단 등)를 체계적으로 로깅하고 모니터링하여 문제 발생 시 신속하게 대응할 수 있는 시스템을 구축해야 합니다.

### 2.4. 데이터 관리 및 활용
- **데이터베이스 연동:** 스크래핑된 데이터를 데이터베이스(PostgreSQL, MongoDB 등)에 저장하여 영속성을 확보하고, 데이터 분석 및 서비스 연동을 용이하게 해야 합니다.
- **데이터 품질 관리:** 수집된 데이터의 중복 제거, 누락된 값 처리, 형식 일관성 유지 등 데이터 품질 관리 프로세스를 구축해야 합니다.
